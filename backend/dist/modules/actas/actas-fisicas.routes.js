import { Router } from 'express';
import { authenticate } from '@middleware/auth.middleware';
import { requirePermission } from '@middleware/authorization.middleware';
import { auditarAccion } from '@middleware/audit.middleware';
import { uploadActa, handleMulterError } from '@middleware/upload.middleware';
import { validate } from './dtos';
import { UpdateActaFisicaDTO, AsignarSolicitudDTO, CambiarEstadoActaDTO, ProcesarOCRDTO, ValidacionManualDTO, ValidacionConCorreccionesDTO, } from './dtos';
import { actasFisicasController } from './actas-fisicas.controller';
const router = Router();
router.use(authenticate);
router.post('/', requirePermission(['ACTAS_EDITAR']), uploadActa, handleMulterError, auditarAccion('actafisica'), actasFisicasController.create.bind(actasFisicasController));
router.get('/', requirePermission(['ACTAS_VER']), actasFisicasController.list.bind(actasFisicasController));
router.get('/:id', requirePermission(['ACTAS_VER']), actasFisicasController.getById.bind(actasFisicasController));
router.put('/:id/metadata', requirePermission(['ACTAS_EDITAR']), validate(UpdateActaFisicaDTO), auditarAccion('actafisica', (req) => req.params.id), actasFisicasController.updateMetadata.bind(actasFisicasController));
router.post('/:id/asignar-solicitud', requirePermission(['ACTAS_EDITAR']), validate(AsignarSolicitudDTO), auditarAccion('actafisica', (req) => req.params.id), actasFisicasController.asignarSolicitud.bind(actasFisicasController));
router.post('/:id/marcar-encontrada', requirePermission(['ACTAS_EDITAR']), validate(CambiarEstadoActaDTO), auditarAccion('actafisica', (req) => req.params.id), actasFisicasController.marcarEncontrada.bind(actasFisicasController));
router.post('/:id/marcar-no-encontrada', requirePermission(['ACTAS_EDITAR']), validate(CambiarEstadoActaDTO), auditarAccion('actafisica', (req) => req.params.id), actasFisicasController.marcarNoEncontrada.bind(actasFisicasController));
router.post('/:id/procesar-ocr', requirePermission(['ACTAS_PROCESAR']), validate(ProcesarOCRDTO), auditarAccion('actafisica', (req) => req.params.id), actasFisicasController.procesarOCR.bind(actasFisicasController));
router.post('/:id/validar-manual', requirePermission(['ACTAS_EDITAR']), validate(ValidacionManualDTO), auditarAccion('actafisica', (req) => req.params.id), actasFisicasController.validarManual.bind(actasFisicasController));
router.get('/:id/exportar-excel', requirePermission(['ACTAS_VER']), actasFisicasController.exportarExcel.bind(actasFisicasController));
router.get('/:id/comparar-ocr', requirePermission(['ACTAS_VER']), actasFisicasController.compararOCRconFisica.bind(actasFisicasController));
router.post('/:id/validar-con-correcciones', requirePermission(['ACTAS_EDITAR']), validate(ValidacionConCorreccionesDTO), auditarAccion('actafisica', (req) => req.params.id), actasFisicasController.validarConCorrecciones.bind(actasFisicasController));
export default router;
//# sourceMappingURL=actas-fisicas.routes.js.map